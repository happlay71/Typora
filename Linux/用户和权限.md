[TOC]

# root用户(超级管理员)

- 在Linux系统中，拥有最大权限的账户名为：root(超级管理员)
- 普通用户的权限，一般在其HOME目录内是不受限的
- 其他地方普通用户仅有只读和执行权限，无修改权限

# 切换用户命令

## su

`su [-] [用户名]`

- `-`符号是可选的，表示是否在切换用户后加载环境变量，建议带上
- 用户名，表示要切换的用户，用户名可省略，省略表示切换到root
- 使用普通用户，切换到其他用户需要输入密码，
- 使用root用户切换到其他用户，无需密码

## exit

- 切换用户后，可以通过exit命令退回上一个用户，也可以用快捷键：`ctrl+d`

## sudo

`sudo 其他命令`

- 因不建议长期使用root用户，避免带来系统损坏
- 在其他命令之前，带上sudo，即可为这一条命令临时赋予root授权

- 但并不是所有的用户都有权力使用sudo，需要有sudo认证

### 为普通用户配置sudo认证

- 切换到root用户，执行`visudo`命令，会自动通过vi编辑器打开：`/etc/sudoers`

- 在文件的最后添加：

  `用户名 ALL=(ALL)    NOPASSWD: ALL	`

  - 其中最后的`NOPASSWD: ALL`表示使用sudo命令无需输入密码

- 最后通过wq保存

- 切换回普通用户再执行命令

# 用户(用户组)

## 用户组

- 需要root用户执行
  - `groupadd 用户组名`：创建用户组
  - `groupdel 用户组名`：删除用户组

## 用户

- 需要root用户执行
  - `useradd [-g -d] 用户名`：创建用户
    - -g：指定用户的组，不指定-g，会创建同名组并自动加入，指定-g需要组已经存在，如已存在同名组，必须使用-g
    - -d：指定用户HOME路径，不指定，HOME目录默认在`/home/用户名`
  - `userdel [-r] 用户名`：删除用户
    - -r：删除用户的HOME目录，不使用-r，删除用户时，HOME目录保留
  - `id [用户名]`：查看用户所属组
    - 用户名：被查看的用户，如果不提供则查看自身
  - `usermod -aG 用户组 用户名`：修改用户所属组

## getent

`getent passwd`：查看当前系统中有哪些用户

- 用户名：密码(x)：用户ID：组ID：描述信息(无用)：HOME目录：执行终端(默认bash)

`getent group`：可查看但前系统中有哪些用户组

- 组名称：组认证(显示为x)：组ID

# 查看权限控制

![](https://happlay-docs.oss-cn-beijing.aliyuncs.com/docs/Snipaste_2024-05-13_17-55-13.png)

![](https://happlay-docs.oss-cn-beijing.aliyuncs.com/docs/Snipaste_2024-05-13_18-01-26.png)

- r：针对文件可以查看文件内容
  - 针对文件夹可以查看文件夹内容，如ls命令
- w：针对文件表示可以修改此文件
  - 针对文件夹，可以在文件夹内：创建、删除、改名等操作
- x：针对文件表示可以将文件作为程序执行
  - 针对文件夹，表示可以更改工作目录到此文件夹，即cd进入

# 修改权限控制

## chmod

- 修改文件、文件夹的权限信息

  **注：只有文件、文件夹的所属用户或root用户可以修改。**

  `chmod [-R] 权限 文件或文件夹`

  `chmod u=rwx,g=rx,o=x hello.txt`

- -R：对文件夹内的全部内容应用同样的操作

| 0    | 无任何权限，即--- |
| ---- | ----------------- |
| 1    | 仅有x权限，即--x  |
| 2    | 仅有w权限，即-w-  |
| 3    | 有w和x权限，即-wx |
| 4    | 仅有r权限，即r--  |
| 5    | 有r和x权限，即r-x |
| 6    | 有r和w权限，即rw- |
| 7    | 有全部权限，即rwx |

## chown

- 可以修改文件、文件夹的所属用户和用户组，**此命令只适用于root用户执行**

  `chown [-R] [用户][:][用户组] 文件或文件夹`

- -R：同chmod，对文件加内全部内容应用相同规则

- 用户：修改所属用户

- 用户组：修改所属用户组

- `:`：用于分割用户和用户组